<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قصة سارة - Context Arabic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .font-english { font-family: 'Lato', sans-serif; }
        .audio-player {
            background: linear-gradient(135deg, #22c55e, #10b981);
            border-radius: 1rem;
            padding: 2rem;
            color: white;
        }
        .question-card {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        .question-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .option-btn {
            background: #f3f4f6;
            border: 2px solid #e5e7eb;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: right;
            width: 100%;
            margin: 0.25rem 0;
        }
        .option-btn:hover {
            background: #e5e7eb;
            border-color: #22c55e;
        }
        .option-btn.selected {
            background: #dbeafe;
            border-color: #3b82f6;
        }
        .option-btn.correct {
            background: #d1fae5;
            border-color: #10b981;
        }
        .option-btn.incorrect {
            background: #fee2e2;
            border-color: #ef4444;
        }
        .score-display {
            background: linear-gradient(135deg, #22c55e, #10b981);
            color: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-top: 2rem;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-green-50">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 shadow-lg" style="background: linear-gradient(135deg, #22c55e, #10b981);">
        <div class="container mx-auto px-4 md:px-6 py-3 md:py-4">
            <div class="flex items-center justify-between">
                <a href="../index.html" class="flex items-center gap-2 text-white hover:opacity-80 transition">
                    <i class="fas fa-home text-xl md:text-2xl"></i>
                    <span class="font-semibold text-sm md:text-lg hidden sm:inline">Home</span>
                </a>
                <div class="text-center flex-1 px-4">
                    <span class="text-lg md:text-2xl font-bold text-white">قصة سارة</span>
                </div>
                <a href="index.html" class="flex items-center gap-2 text-white hover:opacity-80 transition">
                    <span class="font-semibold text-sm md:text-lg hidden sm:inline">Listening Module</span>
                    <i class="fas fa-arrow-right text-xl md:text-2xl"></i>
                </a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8 max-w-4xl">
        
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="inline-block px-4 py-2 bg-green-100 text-green-800 rounded-full mb-4">
                <i class="fas fa-signal mr-2"></i>Advanced
            </div>
            <h1 class="text-4xl font-bold text-gray-900 mb-2">قصة سارة</h1>
            <p class="text-xl text-gray-600 font-english">Sara's Story</p>
        </div>

        <!-- Audio Player -->
        <div class="audio-player mb-8">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <i class="fas fa-headphones text-3xl mb-2"></i>
                    <p class="text-lg">استمع إلى التسجيل الصوتي</p>
                    <p class="text-sm opacity-90 font-english">Listen to the audio recording</p>
                </div>
                <div class="text-right">
                    <div class="text-2xl font-bold" id="playCount">0</div>
                    <div class="text-sm opacity-90">مرات الاستماع</div>
                </div>
            </div>
            <audio id="audioPlayer" controls class="w-full">
                <source src="سارة.mp3" type="audio/mpeg">
                متصفحك لا يدعم تشغيل الملفات الصوتية
            </audio>
        </div>

        <!-- Instructions -->
        <div class="bg-blue-50 border-r-4 border-blue-500 p-4 rounded-lg mb-8">
            <h2 class="text-xl font-bold text-blue-900 mb-2">
                <i class="fas fa-info-circle ml-2"></i>تعليمات
            </h2>
            <ul class="list-disc list-inside text-blue-800 space-y-1">
                <li>استمع إلى التسجيل الصوتي بتركيز</li>
                <li>يمكنك إعادة الاستماع أكثر من مرة</li>
                <li>أجب على الأسئلة بعد الاستماع</li>
                <li>اضغط على "تحقق من الإجابات" لمعرفة نتيجتك</li>
            </ul>
        </div>

        <!-- True/False Section -->
        <div id="tf-section" class="mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">
                <i class="fas fa-check-circle text-green-600 ml-2"></i>
                أسئلة صح أو خطأ
            </h2>

            <div class="question-card">
                <p class="text-lg mb-3"><span class="font-bold text-green-600">1.</span> — تعمل منذ ثلاث سنوات.</p>
                <div class="flex gap-4">
                    <button class="option-btn tf-option" data-question="1" data-answer="true" onclick="selectTF(this, 1, 'true')">
                        <i class="fas fa-check ml-2 text-green-600"></i>صح
                    </button>
                    <button class="option-btn tf-option" data-question="1" data-answer="false" onclick="selectTF(this, 1, 'false')">
                        <i class="fas fa-times ml-2 text-red-600"></i>خطأ
                    </button>
                </div>
            </div>

            <div class="question-card">
                <p class="text-lg mb-3"><span class="font-bold text-green-600">2.</span> — سرقته لشراء دواء أخيها.</p>
                <div class="flex gap-4">
                    <button class="option-btn tf-option" data-question="2" data-answer="true" onclick="selectTF(this, 2, 'true')">
                        <i class="fas fa-check ml-2 text-green-600"></i>صح
                    </button>
                    <button class="option-btn tf-option" data-question="2" data-answer="false" onclick="selectTF(this, 2, 'false')">
                        <i class="fas fa-times ml-2 text-red-600"></i>خطأ
                    </button>
                </div>
            </div>

            <div class="question-card">
                <p class="text-lg mb-3"><span class="font-bold text-green-600">3.</span> أخو سارة لا يملك تأمينًا يًا.</p>
                <div class="flex gap-4">
                    <button class="option-btn tf-option" data-question="3" data-answer="true" onclick="selectTF(this, 3, 'true')">
                        <i class="fas fa-check ml-2 text-green-600"></i>صح
                    </button>
                    <button class="option-btn tf-option" data-question="3" data-answer="false" onclick="selectTF(this, 3, 'false')">
                        <i class="fas fa-times ml-2 text-red-600"></i>خطأ
                    </button>
                </div>
            </div>

        </div>

        <!-- MCQ Section -->
        <div id="mcq-section" class="mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">
                <i class="fas fa-list-ul text-blue-600 ml-2"></i>
                أسئلة اختيار من متعدد
            </h2>

            <div class="question-card">
                <p class="text-lg font-bold mb-3 text-gray-900">4. كم سنة عملت سارة في المتجر؟</p>
                <div class="space-y-2">

                    <button class="option-btn mcq-option" data-question="4" data-correct="false" onclick="selectMCQ(this, 4)">
                        <span class="font-bold text-blue-600 ml-2">أ.</span> سنة واحدة
                    </button>

                    <button class="option-btn mcq-option" data-question="4" data-correct="true" onclick="selectMCQ(this, 4)">
                        <span class="font-bold text-blue-600 ml-2">ب.</span> ثلاث سنوات
                    </button>

                    <button class="option-btn mcq-option" data-question="4" data-correct="false" onclick="selectMCQ(this, 4)">
                        <span class="font-bold text-blue-600 ml-2">ج.</span> خمس سنوات
                    </button>

                    <button class="option-btn mcq-option" data-question="4" data-correct="false" onclick="selectMCQ(this, 4)">
                        <span class="font-bold text-blue-600 ml-2">د.</span> سنتان
                    </button>

                </div>
            </div>

            <div class="question-card">
                <p class="text-lg font-bold mb-3 text-gray-900">5. لماذا أخذت سارة المال؟</p>
                <div class="space-y-2">

                    <button class="option-btn mcq-option" data-question="5" data-correct="false" onclick="selectMCQ(this, 5)">
                        <span class="font-bold text-blue-600 ml-2">أ.</span> أرادت شراء هاتف جديد
                    </button>

                    <button class="option-btn mcq-option" data-question="5" data-correct="false" onclick="selectMCQ(this, 5)">
                        <span class="font-bold text-blue-600 ml-2">ب.</span> كانت غاضبة من المدير
                    </button>

                    <button class="option-btn mcq-option" data-question="5" data-correct="true" onclick="selectMCQ(this, 5)">
                        <span class="font-bold text-blue-600 ml-2">ج.</span> لم تستطع دفع ثمن دواء أخيها
                    </button>

                    <button class="option-btn mcq-option" data-question="5" data-correct="false" onclick="selectMCQ(this, 5)">
                        <span class="font-bold text-blue-600 ml-2">د.</span> أرادت السفر
                    </button>

                </div>
            </div>

            <div class="question-card">
                <p class="text-lg font-bold mb-3 text-gray-900">6. كم كان ثمن الدواء؟</p>
                <div class="space-y-2">

                    <button class="option-btn mcq-option" data-question="6" data-correct="false" onclick="selectMCQ(this, 6)">
                        <span class="font-bold text-blue-600 ml-2">أ.</span> 100 دولار
                    </button>

                    <button class="option-btn mcq-option" data-question="6" data-correct="false" onclick="selectMCQ(this, 6)">
                        <span class="font-bold text-blue-600 ml-2">ب.</span> 150 دولار
                    </button>

                    <button class="option-btn mcq-option" data-question="6" data-correct="false" onclick="selectMCQ(this, 6)">
                        <span class="font-bold text-blue-600 ml-2">ج.</span> 200 دولار
                    </button>

                    <button class="option-btn mcq-option" data-question="6" data-correct="true" onclick="selectMCQ(this, 6)">
                        <span class="font-bold text-blue-600 ml-2">د.</span> 300 دولار
                    </button>

                </div>
            </div>

            <div class="question-card">
                <p class="text-lg font-bold mb-3 text-gray-900">7. ماذا فعل المدير بعد السرقة؟</p>
                <div class="space-y-2">

                    <button class="option-btn mcq-option" data-question="7" data-correct="false" onclick="selectMCQ(this, 7)">
                        <span class="font-bold text-blue-600 ml-2">أ.</span> طرد سارة فورًا
                    </button>

                    <button class="option-btn mcq-option" data-question="7" data-correct="true" onclick="selectMCQ(this, 7)">
                        <span class="font-bold text-blue-600 ml-2">ب.</span> فحص كاميرات المراقبة
                    </button>

                    <button class="option-btn mcq-option" data-question="7" data-correct="false" onclick="selectMCQ(this, 7)">
                        <span class="font-bold text-blue-600 ml-2">ج.</span> لم يفعل شيئًا
                    </button>

                    <button class="option-btn mcq-option" data-question="7" data-correct="false" onclick="selectMCQ(this, 7)">
                        <span class="font-bold text-blue-600 ml-2">د.</span> اتصل بأخو سارة
                    </button>

                </div>
            </div>

            <div class="question-card">
                <p class="text-lg font-bold mb-3 text-gray-900">8. كم كان راتب سارة في الساعة؟</p>
                <div class="space-y-2">

                    <button class="option-btn mcq-option" data-question="8" data-correct="false" onclick="selectMCQ(this, 8)">
                        <span class="font-bold text-blue-600 ml-2">أ.</span> 10 دولارات
                    </button>

                    <button class="option-btn mcq-option" data-question="8" data-correct="true" onclick="selectMCQ(this, 8)">
                        <span class="font-bold text-blue-600 ml-2">ب.</span> 12 دولارًا
                    </button>

                    <button class="option-btn mcq-option" data-question="8" data-correct="false" onclick="selectMCQ(this, 8)">
                        <span class="font-bold text-blue-600 ml-2">ج.</span> 15 دولارًا
                    </button>

                    <button class="option-btn mcq-option" data-question="8" data-correct="false" onclick="selectMCQ(this, 8)">
                        <span class="font-bold text-blue-600 ml-2">د.</span> 18 دولارًا
                    </button>

                </div>
            </div>

            <div class="question-card">
                <p class="text-lg font-bold mb-3 text-gray-900">9. كم كان في الدرج قبل أن تأخذ سارة المال؟</p>
                <div class="space-y-2">

                    <button class="option-btn mcq-option" data-question="9" data-correct="false" onclick="selectMCQ(this, 9)">
                        <span class="font-bold text-blue-600 ml-2">أ.</span> 300 دولار
                    </button>

                    <button class="option-btn mcq-option" data-question="9" data-correct="false" onclick="selectMCQ(this, 9)">
                        <span class="font-bold text-blue-600 ml-2">ب.</span> 500 دولار
                    </button>

                    <button class="option-btn mcq-option" data-question="9" data-correct="true" onclick="selectMCQ(this, 9)">
                        <span class="font-bold text-blue-600 ml-2">ج.</span> 800 دولار
                    </button>

                    <button class="option-btn mcq-option" data-question="9" data-correct="false" onclick="selectMCQ(this, 9)">
                        <span class="font-bold text-blue-600 ml-2">د.</span> 1000 دولار
                    </button>

                </div>
            </div>

            <div class="question-card">
                <p class="text-lg font-bold mb-3 text-gray-900">10. كم بقي في الدرج بعد أخذ المبلغ؟</p>
                <div class="space-y-2">

                    <button class="option-btn mcq-option" data-question="10" data-correct="false" onclick="selectMCQ(this, 10)">
                        <span class="font-bold text-blue-600 ml-2">أ.</span> 800 دولار
                    </button>

                    <button class="option-btn mcq-option" data-question="10" data-correct="false" onclick="selectMCQ(this, 10)">
                        <span class="font-bold text-blue-600 ml-2">ب.</span> 300 دولار
                    </button>

                    <button class="option-btn mcq-option" data-question="10" data-correct="false" onclick="selectMCQ(this, 10)">
                        <span class="font-bold text-blue-600 ml-2">ج.</span> 200 دولار
                    </button>

                    <button class="option-btn mcq-option" data-question="10" data-correct="true" onclick="selectMCQ(this, 10)">
                        <span class="font-bold text-blue-600 ml-2">د.</span> 500 دولار
                    </button>

                </div>
            </div>

            <div class="question-card">
                <p class="text-lg font-bold mb-3 text-gray-900">11. متى واجه المدير سارة بالسرقة؟</p>
                <div class="space-y-2">

                    <button class="option-btn mcq-option" data-question="11" data-correct="false" onclick="selectMCQ(this, 11)">
                        <span class="font-bold text-blue-600 ml-2">أ.</span> يوم السبت
                    </button>

                    <button class="option-btn mcq-option" data-question="11" data-correct="false" onclick="selectMCQ(this, 11)">
                        <span class="font-bold text-blue-600 ml-2">ب.</span> يوم الأحد
                    </button>

                    <button class="option-btn mcq-option" data-question="11" data-correct="true" onclick="selectMCQ(this, 11)">
                        <span class="font-bold text-blue-600 ml-2">ج.</span> صباح يوم الاثنين
                    </button>

                    <button class="option-btn mcq-option" data-question="11" data-correct="false" onclick="selectMCQ(this, 11)">
                        <span class="font-bold text-blue-600 ml-2">د.</span> مساء الجمعة
                    </button>

                </div>
            </div>

            <div class="question-card">
                <p class="text-lg font-bold mb-3 text-gray-900">12. كيف كان شعور سارة عندما تحدثت مع المدير؟</p>
                <div class="space-y-2">

                    <button class="option-btn mcq-option" data-question="12" data-correct="false" onclick="selectMCQ(this, 12)">
                        <span class="font-bold text-blue-600 ml-2">أ.</span> كانت غاضبة
                    </button>

                    <button class="option-btn mcq-option" data-question="12" data-correct="false" onclick="selectMCQ(this, 12)">
                        <span class="font-bold text-blue-600 ml-2">ب.</span> كانت تضحك
                    </button>

                    <button class="option-btn mcq-option" data-question="12" data-correct="true" onclick="selectMCQ(this, 12)">
                        <span class="font-bold text-blue-600 ml-2">ج.</span> كانت تبكي
                    </button>

                    <button class="option-btn mcq-option" data-question="12" data-correct="false" onclick="selectMCQ(this, 12)">
                        <span class="font-bold text-blue-600 ml-2">د.</span> كانت سعيدة
                    </button>

                </div>
            </div>

        </div>

        <!-- Submit Button -->
        <button onclick="checkAnswers()" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xl font-bold py-4 rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg">
            <i class="fas fa-check-double ml-2"></i>تحقق من الإجابات
        </button>

        <!-- Score Display -->
        <div id="scoreDisplay" class="hidden score-display">
            <i class="fas fa-trophy ml-2"></i>
            <span id="scoreText"></span>
        </div>

    </main>

    <!-- Footer -->
    <footer class="mt-16 py-6 md:py-8 text-white text-center" style="background: linear-gradient(135deg, #22c55e, #10b981);">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <a href="../index.html" class="hover:opacity-80 transition">
                    <i class="fas fa-brain text-xl md:text-2xl mr-2"></i>
                    <span class="font-semibold text-sm md:text-base">Context Arabic</span>
                </a>
                <p class="text-xs md:text-sm opacity-90">&copy; 2025 - Learn Arabic in Context</p>
                <a href="index.html" class="hover:opacity-80 transition">
                    <span class="font-semibold text-sm md:text-base">Back to Listening</span>
                    <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>
        </div>
    </footer>

    <script>
        // Track play count
        let playCount = 0;
        const audioPlayer = document.getElementById('audioPlayer');
        const playCountDisplay = document.getElementById('playCount');
        
        audioPlayer.addEventListener('play', () => {
            playCount++;
            playCountDisplay.textContent = playCount;
        });

        // Store answers
        const tfAnswers = {};
        const mcqAnswers = {};
        const tfCorrect = {1: false,2: false,3: true};
        const mcqCorrect = {};
        
        // Store MCQ correct answers
        mcqCorrect[4] = true;
mcqCorrect[5] = true;
mcqCorrect[6] = true;
mcqCorrect[7] = true;
mcqCorrect[8] = true;
mcqCorrect[9] = true;
mcqCorrect[10] = true;
mcqCorrect[11] = true;
mcqCorrect[12] = true;

        function selectTF(btn, qnum, answer) {
            // Deselect other buttons in this question
            document.querySelectorAll(`[data-question="${qnum}"].tf-option`).forEach(b => {
                b.classList.remove('selected');
            });
            
            btn.classList.add('selected');
            tfAnswers[qnum] = (answer === 'true');
        }

        function selectMCQ(btn, qnum) {
            // Deselect other buttons in this question
            document.querySelectorAll(`[data-question="${qnum}"].mcq-option`).forEach(b => {
                b.classList.remove('selected');
            });
            
            btn.classList.add('selected');
            mcqAnswers[qnum] = (btn.dataset.correct === 'true');
        }

        function checkAnswers() {
            let tfScore = 0;
            let mcqScore = 0;
            
            // Check T/F
            Object.keys(tfCorrect).forEach(qnum => {
                const buttons = document.querySelectorAll(`[data-question="${qnum}"].tf-option`);
                const userAnswer = tfAnswers[qnum];
                const correct = tfCorrect[qnum];
                
                buttons.forEach(btn => {
                    btn.classList.remove('correct', 'incorrect');
                    const btnAnswer = (btn.dataset.answer === 'true');
                    
                    if (btnAnswer === correct) {
                        btn.classList.add('correct');
                    } else if (btn.classList.contains('selected')) {
                        btn.classList.add('incorrect');
                    }
                });
                
                if (userAnswer === correct) {
                    tfScore++;
                }
            });
            
            // Check MCQ
            Object.keys(mcqCorrect).forEach(qnum => {
                const buttons = document.querySelectorAll(`[data-question="${qnum}"].mcq-option`);
                const userAnswer = mcqAnswers[qnum];
                const correct = mcqCorrect[qnum];
                
                buttons.forEach(btn => {
                    btn.classList.remove('correct', 'incorrect');
                    const isCorrect = (btn.dataset.correct === 'true');
                    
                    if (isCorrect) {
                        btn.classList.add('correct');
                    } else if (btn.classList.contains('selected')) {
                        btn.classList.add('incorrect');
                    }
                });
                
                if (userAnswer === correct) {
                    mcqScore++;
                }
            });
            
            // Display score
            const totalScore = tfScore + mcqScore;
            const totalQuestions = Object.keys(tfCorrect).length + Object.keys(mcqCorrect).length;
            const percentage = Math.round((totalScore / totalQuestions) * 100);
            
            const scoreDisplay = document.getElementById('scoreDisplay');
            const scoreText = document.getElementById('scoreText');
            
            scoreText.textContent = `نتيجتك: ${totalScore} من ${totalQuestions} (${percentage}%)`;
            scoreDisplay.classList.remove('hidden');
            
            // Scroll to score
            scoreDisplay.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    </script>
    <!-- Global AI Assistant -->
    <script src="../ai-assistant.js"></script>

</body>
</html>