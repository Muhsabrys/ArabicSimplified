<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Match - Arabic Vocabulary Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Lato', sans-serif; }
        .font-arabic { font-family: 'Cairo', sans-serif; }
        .card { perspective: 1000px; }
        .card-inner { transition: transform 0.6s; transform-style: preserve-3d; }
        .card.flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back { backface-visibility: hidden; }
        .card-back { transform: rotateY(180deg); }
    </style>
</head>
<body class="bg-gradient-to-br from-orange-50 to-yellow-50">
    
    <nav class="bg-gradient-to-r from-orange-500 to-amber-600 text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="index.html" class="flex items-center gap-3 hover:opacity-80 transition">
                    <i class="fas fa-arrow-left text-2xl"></i>
                    <span class="text-xl hidden md:inline">Back to Games</span>
                </a>
                <div class="flex items-center gap-3">
                    <i class="fas fa-brain text-3xl"></i>
                    <h1 class="text-2xl font-bold">Memory Match ðŸ§ </h1>
                </div>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-6 py-12">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-900 mb-2">Memory Match Game</h2>
                <p class="text-gray-600 text-lg">Match Arabic words with their English translations!</p>
            </div>

            <!-- Stats -->
            <div class="grid grid-cols-3 gap-4 mb-8">
                <div class="bg-white rounded-lg p-4 text-center shadow">
                    <p class="text-gray-600 text-sm">Matches Found</p>
                    <p id="matches" class="text-3xl font-bold text-orange-600">0/8</p>
                </div>
                <div class="bg-white rounded-lg p-4 text-center shadow">
                    <p class="text-gray-600 text-sm">Attempts</p>
                    <p id="attempts" class="text-3xl font-bold text-blue-600">0</p>
                </div>
                <div class="bg-white rounded-lg p-4 text-center shadow">
                    <p class="text-gray-600 text-sm">Time</p>
                    <p id="timer" class="text-3xl font-bold text-green-600">0:00</p>
                </div>
            </div>

            <!-- Game Board -->
            <div id="gameBoard" class="grid grid-cols-4 gap-4 mb-8">
                <!-- Cards will be generated by JavaScript -->
            </div>

            <!-- Buttons -->
            <div class="flex gap-4 justify-center">
                <button onclick="resetGame()" class="bg-orange-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-orange-700 transition">
                    <i class="fas fa-redo mr-2"></i>New Game
                </button>
                <button onclick="showHint()" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-blue-700 transition">
                    <i class="fas fa-lightbulb mr-2"></i>Hint
                </button>
            </div>

            <!-- Instructions -->
            <div class="mt-12 bg-white rounded-lg p-6 shadow">
                <h3 class="text-xl font-bold text-gray-900 mb-4">How to Play:</h3>
                <ul class="space-y-2 text-gray-700">
                    <li>âœ“ Click cards to flip them over</li>
                    <li>âœ“ Find matching pairs (Arabic word + English translation)</li>
                    <li>âœ“ Match all 8 pairs to win!</li>
                    <li>âœ“ Try to beat your best score</li>
                </ul>
            </div>
        </div>
    </main>

    <script src="../ai-assistant.js"></script>
    <script>
        const vocabulary = [
            { arabic: 'ÙƒØªØ§Ø¨', english: 'Book' },
            { arabic: 'Ù‚Ù„Ù…', english: 'Pen' },
            { arabic: 'Ù…Ø¯Ø±Ø³Ø©', english: 'School' },
            { arabic: 'Ø·Ø§Ù„Ø¨', english: 'Student' },
            { arabic: 'Ù…Ø¹Ù„Ù…', english: 'Teacher' },
            { arabic: 'Ù…Ø§Ø¡', english: 'Water' },
            { arabic: 'Ø®Ø¨Ø²', english: 'Bread' },
            { arabic: 'Ø´Ù…Ø³', english: 'Sun' }
        ];

        let cards = [];
        let flipped = [];
        let matched = 0;
        let attempts = 0;
        let gameStarted = false;
        let timer = 0;
        let timerInterval = null;

        function createCards() {
            const cardArray = [];
            vocabulary.forEach(item => {
                cardArray.push({ text: item.arabic, type: 'arabic', pair: item.english });
                cardArray.push({ text: item.english, type: 'english', pair: item.arabic });
            });
            return cardArray.sort(() => Math.random() - 0.5);
        }

        function initGame() {
            cards = createCards();
            const board = document.getElementById('gameBoard');
            board.innerHTML = '';
            
            cards.forEach((card, index) => {
                const cardEl = document.createElement('div');
                cardEl.className = 'card cursor-pointer h-24 bg-white rounded-lg shadow-md flex items-center justify-center font-bold text-lg hover:shadow-lg transition';
                cardEl.innerHTML = `
                    <div class="card-inner w-full h-full flex items-center justify-center relative">
                        <div class="card-front w-full h-full flex items-center justify-center bg-gradient-to-br from-orange-400 to-orange-600 text-white rounded-lg">?</div>
                        <div class="card-back w-full h-full flex items-center justify-center text-center px-2 font-arabic text-gray-900 rounded-lg">${card.text}</div>
                    </div>
                `;
                cardEl.onclick = () => flipCard(index, cardEl);
                board.appendChild(cardEl);
            });

            if (!gameStarted) {
                gameStarted = true;
                startTimer();
            }
        }

        function flipCard(index, el) {
            if (flipped.length >= 2) return;
            if (flipped.find(f => f.index === index)) return;
            
            el.classList.add('flipped');
            flipped.push({ index, el });
            
            if (flipped.length === 2) {
                attempts++;
                document.getElementById('attempts').textContent = attempts;
                checkMatch();
            }
        }

        function checkMatch() {
            const [first, second] = flipped;
            const card1 = cards[first.index];
            const card2 = cards[second.index];
            
            const isMatch = card1.pair === card2.text && card2.pair === card1.text;
            
            if (isMatch) {
                matched++;
                document.getElementById('matches').textContent = `${matched}/8`;
                flipped = [];
                
                if (matched === 8) {
                    setTimeout(() => {
                        alert(`ðŸŽ‰ You won in ${attempts} attempts and ${document.getElementById('timer').textContent}!`);
                        clearInterval(timerInterval);
                    }, 500);
                }
            } else {
                setTimeout(() => {
                    first.el.classList.remove('flipped');
                    second.el.classList.remove('flipped');
                    flipped = [];
                }, 1000);
            }
        }

        function resetGame() {
            matched = 0;
            attempts = 0;
            flipped = [];
            timer = 0;
            gameStarted = false;
            document.getElementById('matches').textContent = '0/8';
            document.getElementById('attempts').textContent = '0';
            document.getElementById('timer').textContent = '0:00';
            clearInterval(timerInterval);
            initGame();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timer++;
                const mins = Math.floor(timer / 60);
                const secs = timer % 60;
                document.getElementById('timer').textContent = `${mins}:${String(secs).padStart(2, '0')}`;
            }, 1000);
        }

        function showHint() {
            alert('Hint: Look for pairs that are the same word in different languages!');
        }

        initGame();
    </script>
</body>
</html>
